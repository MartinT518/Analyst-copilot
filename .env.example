# Analyst Copilot Environment Configuration
# Copy this file to .env and update with your actual values
# DO NOT commit .env files with real secrets to version control

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL Database
DATABASE_URL=postgresql://acp_user:acp_password@localhost:5432/acp_db
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=acp_db
DATABASE_USER=acp_user
DATABASE_PASSWORD=acp_password

# Database Pool Settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# =============================================================================
# Redis Configuration
# =============================================================================

REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# =============================================================================
# Vector Database Configuration
# =============================================================================

# Chroma Vector Database
CHROMA_HOST=localhost
CHROMA_PORT=8001
CHROMA_COLLECTION_NAME=acp_documents

# Alternative: pgvector (if using PostgreSQL for vectors)
PGVECTOR_ENABLED=false
PGVECTOR_DIMENSION=1536

# =============================================================================
# LLM Service Configuration
# =============================================================================

# OpenAI API (for embeddings and LLM calls)
OPENAI_API_KEY=your-openai-api-key-here
LLM_ENDPOINT=https://ai.int.cyber.ee/openai
EMBEDDING_ENDPOINT=http://ai.int.cyber.ee:8083/v1

# Local LLM Service (Gwen/Qwen)
LOCAL_LLM_URL=http://localhost:11434
LOCAL_LLM_MODEL=qwen:latest
LOCAL_LLM_API_KEY=your-local-llm-api-key

# =============================================================================
# Service Configuration
# =============================================================================

# Ingest Service
INGEST_SERVICE_HOST=0.0.0.0
INGEST_SERVICE_PORT=8000
INGEST_SERVICE_WORKERS=4
INGEST_SERVICE_RELOAD=false

# Agents Service
AGENTS_SERVICE_HOST=0.0.0.0
AGENTS_SERVICE_PORT=8001
AGENTS_SERVICE_WORKERS=4
AGENTS_SERVICE_RELOAD=false

# Code Analyzer Service
CODE_ANALYZER_SERVICE_HOST=0.0.0.0
CODE_ANALYZER_SERVICE_PORT=8002
CODE_ANALYZER_SERVICE_WORKERS=2
CODE_ANALYZER_SERVICE_RELOAD=false

# =============================================================================
# Security Configuration
# =============================================================================

# JWT Configuration
SECRET_KEY=your-secret-key-change-in-production-minimum-32-characters
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API Keys
API_KEY_HEADER=X-API-Key
DEFAULT_API_KEY=your-default-api-key-for-development
ACP_API_KEY=your-api-key-here

# CORS Configuration
CORS_ORIGINS=["http://localhost:3000", "http://localhost:5173", "http://localhost:8080"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# =============================================================================
# HashiCorp Vault Configuration (Optional)
# =============================================================================

VAULT_ENABLED=false
VAULT_URL=http://localhost:8200
VAULT_TOKEN=your-vault-token
VAULT_MOUNT_POINT=secret
VAULT_SECRET_PATH=acp

# =============================================================================
# Observability Configuration
# =============================================================================

# Logging
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/acp-ingest.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# Metrics
METRICS_ENABLED=true
PROMETHEUS_ENABLED=false
METRICS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus_multiproc

# Tracing
TRACING_ENABLED=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=analyst-copilot

# Health Checks
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60

# =============================================================================
# File Processing Configuration
# =============================================================================

# Upload Limits
MAX_FILE_SIZE=100MB
UPLOAD_DIR=/app/uploads
ALLOWED_EXTENSIONS=csv,html,htm,xml,pdf,md,txt,zip,json
ALLOWED_FILE_TYPES=["pdf", "docx", "txt", "md", "csv", "html", "xml"]

# Processing Configuration
MAX_CHUNK_SIZE=1000
CHUNK_OVERLAP=200
BATCH_SIZE=10
MAX_CONCURRENT_JOBS=5

# OCR Configuration
OCR_ENABLED=true
OCR_LANGUAGE=eng
OCR_DPI=300

# PII Detection
PII_DETECTION_ENABLED=true
PII_REDACTION_MODE=redact
PII_REDACTION_ENABLED=true
PII_CONFIDENCE_THRESHOLD=0.8
PRESIDIO_ENABLED=false

# =============================================================================
# Background Job Configuration
# =============================================================================

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=["json"]
CELERY_TIMEZONE=UTC

# Job Timeouts
INGESTION_JOB_TIMEOUT=3600
ANALYSIS_JOB_TIMEOUT=1800
EMBEDDING_JOB_TIMEOUT=600

# =============================================================================
# Development Configuration
# =============================================================================

# Environment
ENVIRONMENT=development
TESTING=false
RELOAD=false
WORKERS=1

# Development Tools
RELOAD_ON_CHANGE=true
PROFILING_ENABLED=false

# =============================================================================
# Production Configuration
# =============================================================================

# Security Headers
SECURE_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CONTENT_SECURITY_POLICY="default-src 'self'"

# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/acp.crt
SSL_KEY_PATH=/etc/ssl/private/acp.key

# Monitoring
GRAFANA_PASSWORD=admin

# =============================================================================
# CLI Configuration
# =============================================================================

# Default CLI Settings
ACP_OUTPUT_FORMAT=table
ACP_VERBOSE=false
ACP_DEBUG=false
ACP_LOG_FILE=/var/log/acp/cli.log

# Service URLs for CLI
ACP_BASE_URL=http://localhost:8000
ACP_INGEST_URL=http://localhost:8000
ACP_AGENTS_URL=http://localhost:8001
ACP_CODE_ANALYZER_URL=http://localhost:8002

# CLI API Keys
ACP_INGEST_API_KEY=your-ingest-api-key
ACP_AGENTS_API_KEY=your-agents-api-key
ACP_CODE_ANALYZER_API_KEY=your-code-analyzer-api-key

# =============================================================================
# Docker Compose Configuration
# =============================================================================

COMPOSE_PROJECT_NAME=acp
COMPOSE_FILE=docker-compose.yml
